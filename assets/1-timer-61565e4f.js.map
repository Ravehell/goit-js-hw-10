{"version":3,"file":"1-timer-61565e4f.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputDate = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('[data-start]');\nlet timerDays = document.querySelector('[data-days]');\nlet timerHours = document.querySelector('[data-hours]');\nlet timerMinutes = document.querySelector('[data-minutes]');\nlet timerSeconds = document.querySelector('[data-seconds]');\n\nstartBtn.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    startBtn.disabled = false;\n    startBtn.addEventListener('click', startCounter);\n    if (selectedDates[0] < Date.now()) {\n      iziToast.warning({\n        position: 'topCenter',\n        title: 'Warning',\n        message: 'Please choose a date in the future',\n      });\n      startBtn.disabled = true;\n      return;\n    } else if (event.target.nodeName !== 'button') {\n      return;\n    } else {\n      startCounter();\n    }\n  },\n};\n\nexport const fp = flatpickr(inputDate, options);\n\nfunction startCounter(event) {\n  iziToast.success({\n    position: 'topCenter',\n    title: 'OK',\n    message: 'A Good Choice!',\n  });\n\n  startBtn.disabled = true;\n  inputDate.disabled = true;\n  let intervalId = null;\n\n  let userSelectedDate = fp.selectedDates[0];\n\n  intervalId = setInterval(() => {\n    let currentTime = Date.now();\n\n    let deltaTime = userSelectedDate - currentTime;\n\n    if (deltaTime <= 0) {\n      clearInterval(intervalId);\n      intervalId = null;\n      inputDate.disabled = false;\n      startBtn.disabled = false;\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(deltaTime);\n    timerDays.textContent = pad(days);\n    timerHours.textContent = pad(hours);\n    timerMinutes.textContent = pad(minutes);\n    timerSeconds.textContent = pad(seconds);\n  }, 1000);\n}\n\nfunction pad(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}"],"names":["inputDate","startBtn","timerDays","timerHours","timerMinutes","timerSeconds","options","selectedDates","startCounter","iziToast","fp","flatpickr","event","intervalId","userSelectedDate","currentTime","deltaTime","days","hours","minutes","seconds","convertMs","pad","value","ms"],"mappings":"gDAMA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAW,SAAS,cAAc,cAAc,EACtD,IAAIC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE1DJ,EAAS,SAAW,GAEpB,MAAMK,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CAGrB,GAFAN,EAAS,SAAW,GACpBA,EAAS,iBAAiB,QAASO,CAAY,EAC3CD,EAAc,GAAK,KAAK,IAAG,EAAI,CACjCE,EAAS,QAAQ,CACf,SAAU,YACV,MAAO,UACP,QAAS,oCACjB,CAAO,EACDR,EAAS,SAAW,GACpB,MACD,KAAM,IAAI,MAAM,OAAO,WAAa,SACnC,OAEAO,IAEH,CACH,EAEaE,EAAKC,EAAUX,EAAWM,CAAO,EAE9C,SAASE,EAAaI,EAAO,CAC3BH,EAAS,QAAQ,CACf,SAAU,YACV,MAAO,KACP,QAAS,gBACb,CAAG,EAEDR,EAAS,SAAW,GACpBD,EAAU,SAAW,GACrB,IAAIa,EAAa,KAEbC,EAAmBJ,EAAG,cAAc,GAExCG,EAAa,YAAY,IAAM,CAC7B,IAAIE,EAAc,KAAK,MAEnBC,EAAYF,EAAmBC,EAEnC,GAAIC,GAAa,EAAG,CAClB,cAAcH,CAAU,EACxBA,EAAa,KACbb,EAAU,SAAW,GACrBC,EAAS,SAAW,GACpB,MACD,CAED,KAAM,CAAE,KAAAgB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAS,EAC7Dd,EAAU,YAAcoB,EAAIL,CAAI,EAChCd,EAAW,YAAcmB,EAAIJ,CAAK,EAClCd,EAAa,YAAckB,EAAIH,CAAO,EACtCd,EAAa,YAAciB,EAAIF,CAAO,CACvC,EAAE,GAAI,CACT,CAEA,SAASE,EAAIC,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASF,EAAUG,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}